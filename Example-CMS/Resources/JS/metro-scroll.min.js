(function(n){n.widget("metro.scrollbar",{version:"1.0.0",options:{height:"100%",width:"100%",axis:["x","y"],wheel:55},startSize:{width:null,height:null},elemPadding:!1,bothScroll:!1,scrollbar:null,contentHeight:0,contentWidth:0,contentMinHeight:0,contentMinWidth:0,dragElem:null,dragStart:!1,startCoords:{x:0,y:0},currCoords:{x:0,y:0},handlers:!1,_create:function(){var t=this.element,o=this,i,r,u,f,e;t.data("scroll")!=undefined&&(i=t.data("scroll"),i=="vertical"&&(this.options.axis="y"),i=="horizontal"&&(this.options.axis="x"),i=="both"&&(this.options.axis=["x","y"]));t.data("height")!=undefined&&(this.options.height=t.data("height"));t.data("width")!=undefined&&(this.options.width=t.data("width"));t.data("wheel")!=undefined&&(this.options.wheel=t.data("wheel"));t.css({position:"relative"});r=t.outerWidth();u=t.outerHeight();this.contentMinWidth=r;this.contentMinHeight=u;this.startSize.width=this.options.width;this.startSize.height=this.options.height;f=this.startSize.width==parseInt(this.startSize.width)?this.startSize.width+"px":this.startSize.width;e=this.startSize.height==parseInt(this.startSize.height)?this.startSize.height+"px":this.startSize.height;t.wrap('<div class="scrollbar" style="width: '+f+"; height: "+e+';"><\/div>');this.scrollbar=t.parents(".scrollbar").first();this.scrollbar.parents().first().css({overflow:"hidden"});this._build(r,u);n(window).resize(function(){o._resize()})},_resize:function(){var u=this.element,i,r;if(!isNaN(parseInt(this.element.css("left")))&&parseInt(this.element.css("left"))!=0||!isNaN(parseInt(this.element.css("top")))&&parseInt(this.element.css("top"))){var n=Math.abs(parseInt(this.element.css("left"))),t=Math.abs(parseInt(this.element.css("top"))),f=this.scrollbar.width(),e=this.scrollbar.height();this.contentWidth-n<f&&(n=n-(f-(this.contentWidth-n)),n<0&&(n=0),this.element.css("left",n*-1));this.element.css("left",n*-1);this.contentHeight-t<e&&(t=t-(e-(this.contentHeight-t)),t<0&&(t=0),this.element.css("top",t*-1))}this.options.width=this.startSize.width;this.options.height=this.startSize.height;this.scrollbar.css({padding:0});this.elemPadding&&(this.element.css({paddingRight:"-=5",paddingBottom:"-=5"}),this.elemPadding=!1);this.scrollbar.find(".scrollbar-v").length>0&&this.scrollbar.find(".scrollbar-v").remove();this.scrollbar.find(".scrollbar-h").length>0&&this.scrollbar.find(".scrollbar-h").remove();this.scrollbar.find(".scrollbar-both").length>0&&this.scrollbar.find(".scrollbar-both").remove();i=u.outerWidth();r=u.outerHeight();this.contentWidth=i;this.contentHeight=r;this._removeHandlers();this._build(i,r)},_build:function(n,t){var i=this.element,n,t;this.options.width=this.options.width=="100%"?this.scrollbar.outerWidth():this.options.width;this.options.height=this.options.height=="100%"?this.scrollbar.outerHeight():this.options.height;this.scrollbar.css({width:this.startSize.width,height:this.startSize.height});this.contentWidth=n;this.contentHeight=t;this.options.axis=="y"?this.contentHeight>this.options.height?(this.scrollbar.css({paddingRight:20,paddingBottom:0}),n=i.outerWidth(),t=i.outerHeight(),this.contentWidth=n,this.contentHeight=t,this._verticalScrollbar(),this._startHandlers()):(this.scrollbar.find(".scrollbar-v").length>0&&this.scrollbar.find(".scrollbar-v").hide(),this.scrollbar.css({paddingRight:0,paddingBottom:0})):this.options.axis=="x"?this.contentWidth>this.options.width?(this.startSize.height=="100%"&&(this.scrollbar.css({paddingBottom:20,paddingRight:0}),n=i.outerWidth(),t=i.outerHeight(),this.contentWidth=n,this.contentHeight=t),this._horizontalScrollbar(),this._startHandlers()):(this.scrollbar.find(".scrollbar-h").length>0&&this.scrollbar.find(".scrollbar-h").hide(),this.scrollbar.css({paddingBottom:0,paddingRight:0})):this.contentHeight>this.options.height&&this.contentWidth>this.options.width?(this.bothScroll=!0,this.scrollbar.find(".scrollbar-both").length>0?this.scrollbar.find(".scrollbar-both").show():this.scrollbar.append('<div class="scrollbar-both"><\/div>'),this.elemPadding||(this.element.css({paddingRight:"+=5",paddingBottom:"+=5"}),this.elemPadding=!0),n=i.outerWidth(),t=i.outerHeight(),this.contentWidth=n,this.contentHeight=t,this._verticalScrollbar(),this._horizontalScrollbar(),this._startHandlers()):(this.bothScroll=!1,this.scrollbar.find(".scrollbar-both").length>0&&this.scrollbar.find(".scrollbar-both").hide(),this.elemPadding&&(this.element.css({paddingRight:"-=5",paddingBottom:"-=5"}),this.elemPadding=!1),this.contentWidth>this.options.width?(this.startSize.height=="100%"&&(this.scrollbar.css({paddingBottom:20,paddingRight:0}),n=i.outerWidth(),t=i.outerHeight(),this.contentWidth=n,this.contentHeight=t),this._horizontalScrollbar(),this._startHandlers()):(this.scrollbar.find(".scrollbar-h").length>0&&this.scrollbar.find(".scrollbar-h").hide(),this.scrollbar.css({paddingBottom:0,paddingRight:0})),this.contentHeight>this.options.height?(this.scrollbar.css({paddingRight:20,paddingBottom:0}),n=i.outerWidth(),t=i.outerHeight(),this.contentWidth=n,this.contentHeight=t,this._verticalScrollbar(),this._startHandlers()):(this.scrollbar.find(".scrollbar-v").length>0&&this.scrollbar.find(".scrollbar-v").hide(),this.scrollbar.css({paddingRight:0,paddingBottom:0})))},_verticalScrollbar:function(){var n,i,r,u,e;this.scrollbar.find(".scrollbar-v").length<1?(n=[],n[n.length]='<div class="scrollbar-v">',n[n.length]='<div class="scrollbar-v-up"><\/div>',n[n.length]='<div class="scrollbar-v-down"><\/div>',n[n.length]='<div class="scrollbar-line-v">',n[n.length]='<div class="scrollbar-line-v-btn"><\/div>',n[n.length]="<\/div>",n[n.length]="<\/div>",n=n.join(""),this.scrollbar.append(n)):this.scrollbar.find(".scrollbar-v").show();var o=this.scrollbar.find(".scrollbar-line-v"),f=this.scrollbar.find(".scrollbar-line-v-btn"),t=this.scrollbar.find(".scrollbar-v");this.bothScroll?(t.height(this.options.height),i=t.height()-15,this.options.height=i,t.height(i)):t.height(this.options.height);r=this.options.height-32;u=r/this.contentHeight;o.height(r);u>=(this.contentHeight-32)/this.contentHeight?f.hide():(e=u*this.options.height,f.show().height(e))},_horizontalScrollbar:function(){var n,i;this.scrollbar.find(".scrollbar-h").length<1?(n=[],n[n.length]='<div class="scrollbar-h">',n[n.length]='<div class="scrollbar-h-up"><\/div>',n[n.length]='<div class="scrollbar-h-down"><\/div>',n[n.length]='<div class="scrollbar-line-h">',n[n.length]='<div class="scrollbar-line-h-btn"><\/div>',n[n.length]="<\/div>",n[n.length]="<\/div>",n=n.join(""),this.scrollbar.append(n)):this.scrollbar.find(".scrollbar-h").show();var e=this.scrollbar.find(".scrollbar-line-h"),u=this.scrollbar.find(".scrollbar-line-h-btn"),t=this.scrollbar.find(".scrollbar-h");this.bothScroll?(t.width(this.options.width),i=t.width()-15,this.options.width=i,t.width(i)):t.width(this.options.width);var f=this.options.width-32,r=f/this.contentWidth,o=r*this.options.width,s=isNaN(parseInt(this.element.css("left")))?0:parseInt(this.element.css("left")),h=Math.abs(s)*r;e.width(f);r>=(this.contentWidth-32)/this.contentWidth?u.hide():u.show().width(o).css({left:h})},_startHandlers:function(){if(this.handlers)return!1;this.handlers=!0;var t=this;n(document).mousemove(function(n){t._drag(n)});n(document).mouseup(function(n){t._dragEnd(n)});this.scrollbar.find(".scrollbar-line-v-btn,.scrollbar-line-h-btn").on("mousedown",function(i){t._dragStart(i,n(this))});this.scrollbar.find(".scrollbar-line-v,.scrollbar-line-h").on("click",function(i){t._clickPos(i,n(this))});this.scrollbar.find(".scrollbar-v-up,.scrollbar-h-up").on("click",function(){t._fixScroll(1,n(this))});this.scrollbar.find(".scrollbar-v-down,.scrollbar-h-down").on("click",function(){t._fixScroll(-1,n(this))});this.scrollbar.mousewheel(function(n,i){return t._fixScroll(i),!1})},_removeHandlers:function(){if(!this.handlers)return!1;this.handlers=!1;var t=this;n(document).mousemove(function(){return!1});n(document).mouseup(function(){return!1});this.scrollbar.find(".scrollbar-line-v-btn,.scrollbar-line-h-btn").off("mousedown");this.scrollbar.find(".scrollbar-line-v,.scrollbar-line-h").off("click");this.scrollbar.find(".scrollbar-v-up,.scrollbar-h-up").off("click");this.scrollbar.find(".scrollbar-v-down,.scrollbar-h-down").off("click")},_clickPos:function(t,i){var u,f,e,r;(n(t.target).attr("class")=="scrollbar-line-v"||n(t.target).attr("class")=="scrollbar-line-h")&&(u=i.offset(),n(t.target).attr("class")=="scrollbar-line-v"?(f=t.pageY-u.top,r=i.find(".scrollbar-line-v-btn"),this.dragElem={elem:r,width:r.width(),height:r.height(),parent:i,parentWidth:i.width(),parentHeight:i.height(),parentOffset:u},this._scrollTo(0,f,"y"),this.dragElem=null):(e=t.pageX-u.left,r=i.find(".scrollbar-line-h-btn"),this.dragElem={elem:r,width:r.width(),height:r.height(),parent:i,parentWidth:i.width(),parentHeight:i.height(),parentOffset:u},this._scrollTo(e,0,"x"),this.dragElem=null))},_fixScroll:function(n,t){var o=this.options.wheel,r,u,f,e,s,h;if(t!==undefined&&(t.hasClass("scrollbar-h-up")||t.hasClass("scrollbar-h-down"))||this.options.axis=="x"||this.options.axis!="x"&&this.options.axis!="y"&&this.scrollbar.find(".scrollbar-v").length<1){var y=o/this.contentWidth*100,c=(this.options.width-32)/100*y,p=parseInt(this.element.css("left")),l=isNaN(p)?0:Math.abs(p),i=this.scrollbar.find(".scrollbar-line-h-btn"),a=this.scrollbar.find(".scrollbar-line-h"),w=parseFloat(i.css("left")),v=isNaN(w)?0:w;n>0?(r=l-o,u=v-c):(r=l+o,u=v+c);r<0&&(r=0);r>this.contentWidth-this.options.width&&(r=this.contentWidth-this.options.width);s={width:a.width(),height:a.height()};h={width:i.width(),height:i.height()};u<0&&(u=0);u+h.width>s.width&&(u=s.width-h.width);this.element.css({left:r*-1});i.css({left:u})}else{var y=o/this.contentHeight*100,c=(this.options.height-32)/100*y,b=parseInt(this.element.css("top")),l=isNaN(b)?0:Math.abs(b),i=this.scrollbar.find(".scrollbar-line-v-btn"),a=this.scrollbar.find(".scrollbar-line-v"),k=parseFloat(i.css("top")),v=isNaN(k)?0:k;n>0?(f=l-o,e=v-c):(f=l+o,e=v+c);f<0&&(f=0);f>this.contentHeight-this.options.height&&(f=this.contentHeight-this.options.height);s={width:a.width(),height:a.height()};h={width:i.width(),height:i.height()};e<0&&(e=0);e+h.height>s.height&&(e=s.height-h.height);this.element.css({top:f*-1});i.css({top:e})}},_scrollTo:function(n,t,i){if(i=="x"){var e=this.options.width-32,f=e/this.contentWidth,r=n/f;r<0&&(r=0);r>this.contentWidth-this.options.width&&(r=this.contentWidth-this.options.width);n<0&&(n=0);n>this.dragElem.parentWidth-this.dragElem.width&&(n=this.dragElem.parentWidth-this.dragElem.width);this.dragElem.elem.css({left:n});this.element.css({left:r*-1})}else{var o=this.options.height-32,f=o/this.contentHeight,u=t/f;u<0&&(u=0);u>this.contentHeight-this.options.height&&(u=this.contentHeight-this.options.height);t<0&&(t=0);t>this.dragElem.parentHeight-this.dragElem.height&&(t=this.dragElem.parentHeight-this.dragElem.height);this.dragElem.elem.css({top:t});this.element.css({top:u*-1})}},_scroll:function(){if(this.dragElem.elem.hasClass("scrollbar-line-h-btn")){var f=this.options.width-32,i=f/this.contentWidth,r=parseInt(this.dragElem.elem.css("left")),e=isNaN(r)?0:Math.abs(r),n=e/i;n<0&&(n=0);n>this.contentWidth-this.options.width&&(n=this.contentWidth-this.options.width);this.element.css({left:n*-1})}else{var o=this.options.height-32,i=o/this.contentHeight,u=parseInt(this.dragElem.elem.css("top")),s=isNaN(u)?0:Math.abs(u),t=s/i;t<0&&(t=0);t>this.contentHeight-this.options.height&&(t=this.contentHeight-this.options.height);this.element.css({top:t*-1})}},_startCoordsDiff:function(n){var t=this.dragElem.elem.offset();this.startCoords.x=n.pageX-t.left;this.startCoords.y=n.pageY-t.top},_dragStart:function(n,t){var i=t.parents().first();this.dragElem={elem:t,width:t.width(),height:t.height(),parent:i,parentWidth:i.width(),parentHeight:i.height(),parentOffset:i.offset()};this.dragStart=!0;this.currCoords.x=n.pageX;this.currCoords.y=n.pageY;this._startCoordsDiff(n)},_drag:function(n){if(this.dragStart){this.currCoords.x=n.pageX;this.currCoords.y=n.pageY;var t=this.currCoords.x-this.startCoords.x-this.dragElem.parentOffset.left,i=this.currCoords.y-this.startCoords.y-this.dragElem.parentOffset.top;t<0&&(t=0);t+this.dragElem.width>=this.dragElem.parentWidth&&(t=this.dragElem.parentWidth-this.dragElem.width);i<0&&(i=0);i+this.dragElem.height>this.dragElem.parentHeight&&(i=this.dragElem.parentHeight-this.dragElem.height);this.dragElem.elem.css({left:t,top:i});this._scroll()}},_dragEnd:function(){this.dragStart&&(this.dragElem=null,this.dragStart=!1,this.startCoords.x=0,this.startCoords.y=0,this.currCoords.x=null,this.currCoords.y=null)},_destroy:function(){},_setOption:function(n,t){this._super("_setOption",n,t)}})})(jQuery);
/*
//# sourceMappingURL=metro-scroll.min.js.map
*/